
/* turn.js 5-beta0.1 | Copyright (c) */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);var TurnJS=function(a,b){b=void 0===b?"":b;this.jQueryObject=$(a);this.jQueryObject.turn(b);this.__setup__()};
TurnJS.prototype.view=function(a){a=void 0===a?this.pages:a;return this.jQueryObject.turn("view",a).filter(function(b){return 0!=b})};
TurnJS.prototype.__setup__=function(){this.pages={__parent__:this,add:function(a,b){b=void 0===b?this.pages+1:b;return this.__parent__.jQueryObject.turn("addPage",$(a),b)},remove:function(a){a=void 0===a?this.page:a;return this.__parent__.jQueryObject.turn("removePage",a)},get pages(){return this.__parent__.jQueryObject.turn("pages")},get size(){return this.__parent__.jQueryObject.turn("size")},set size(a){return this.__parent__.jQueryObject.turn("size",a.width,a.height)}};this.animation={__parent__:this,
turn:function(a){return this.__parent__.jQueryObject.turn("page",a)},get prev(){return this.__parent__.jQueryObject.turn("previous")},get next(){return this.__parent__.jQueryObject.turn("next")},get running(){return this.__parent__.jQueryObject.turn("animating")},set peel(a){return this.__parent__.jQueryObject.turn("peel",a)}};this.event={__parent__:this,get end(){return this.__parent__.jQueryObject.turn("options").when.end},set end(a){return this.__parent__.jQueryObject.turn("options",{when:{end:a}})},
get first(){return this.__parent__.jQueryObject.turn("options").when.first},set first(a){return this.__parent__.jQueryObject.turn("options",{when:{first:a}})},get last(){return this.__parent__.jQueryObject.turn("options").when.last},set last(a){return this.__parent__.jQueryObject.turn("options",{when:{last:a}})},get missing(){return this.__parent__.jQueryObject.turn("options").when.missing},set missing(a){return this.__parent__.jQueryObject.turn("options",{when:{missing:a}})},get start(){return this.__parent__.jQueryObject.turn("options").when.start},
set start(a){return this.__parent__.jQueryObject.turn("options",{when:{start:a}})},get turning(){return this.__parent__.jQueryObject.turn("options").when.turning},set turning(a){return this.__parent__.jQueryObject.turn("options",{when:{turning:a}})},get turned(){return this.__parent__.jQueryObject.turn("options").when.turned},set turned(a){return this.__parent__.jQueryObject.turn("options",{when:{turned:a}})}};this.settings={__parent__:this,get disabled(){return this.__parent__.jQueryObject.turn("disabled")},
set disabled(a){return this.__parent__.jQueryObject.turn("disable",a)},get direction(){return this.__parent__.jQueryObject.turn("direction")},set direction(a){return this.__parent__.jQueryObject.turn("direction",a)},get display(){return this.__parent__.jQueryObject.turn("display")},set display(a){return this.__parent__.jQueryObject.turn("display",a)},get autoCenter(){return this.__parent__.jQueryObject.turn("options").autoCenter},set autoCenter(a){return this.__parent__.jQueryObject.turn("options",
{autoCenter:a})},get duration(){return this.__parent__.jQueryObject.turn("options").duration},set duration(a){return this.__parent__.jQueryObject.turn("options",{duration:a})},get gradients(){return this.__parent__.jQueryObject.turn("options").gradients},set gradients(a){return this.__parent__.jQueryObject.turn("options",{gradients:a})},get elevation(){return this.__parent__.jQueryObject.turn("options").elevation},set elevation(a){return this.__parent__.jQueryObject.turn("options",{elevation:a})},
get turnCorners(){return this.__parent__.jQueryObject.turn("options").turnCorners},set turnCorners(a){return this.__parent__.jQueryObject.turn("options",{turnCorners:a})}}};
$jscomp.global.Object.defineProperties(TurnJS.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return this.jQueryObject.turn("version")}},destroy:{configurable:!0,enumerable:!0,get:function(){this.jQueryObject.turn("destroy");this.jQueryObject=void 0}},page:{configurable:!0,enumerable:!0,get:function(){return this.jQueryObject.turn("page")},set:function(a){return this.jQueryObject.turn("page",a).turn("stop")}}});

/* turn.js 4.1.2 | Copyright (c) 2012 Emmanuel Garcia - 2021 Raffaele Morganti | turnjs.com | turnjs.com/license.txt */
(function(m){function ha(a,b,c){if(c[0]&&"object"!=typeof c[0]){if(b[c[0]])return b[c[0]].apply(a,Array.prototype.slice.call(c,1));throw D(c[0]+" is not a method or property");}return b.init.apply(a,c)}function A(a,b,c,d){return{css:{position:"absolute",top:a,left:b,overflow:d||"hidden",zIndex:c||"auto"}}}function ia(a,b,c,d,e){var f=1-e,g=f*f*f,k=e*e*e;return q(Math.round(g*a.x+3*e*f*f*b.x+3*e*e*f*c.x+k*d.x),Math.round(g*a.y+3*e*f*f*b.y+3*e*e*f*c.y+k*d.y))}function q(a,b){return{x:a,y:b}}function M(a,
b,c){return c?" translate3d("+a+"px,"+b+"px, 0px) ":" translate("+a+"px, "+b+"px) "}function N(a){return" rotate("+a+"deg) "}function z(a,b){return Object.prototype.hasOwnProperty.call(b,a)}function ba(a,b,c,d,e){var f=[];b={x:b.x/100*a.width(),y:b.y/100*a.height()};c={x:c.x/100*a.width(),y:c.y/100*a.height()};var g=c.x-b.x,k=c.y-b.y,n=Math.atan2(k,g),t=n-Math.PI/2;t=Math.abs(a.width()*Math.sin(t))+Math.abs(a.height()*Math.cos(t));g=Math.sqrt(k*k+g*g);c=q(c.x<b.x?a.width():0,c.y<b.y?a.height():0);
var u=Math.tan(n);k=-1/u;u=(k*c.x-c.y-u*b.x+b.y)/(k-u);c=Math.sqrt(Math.pow(u-b.x,2)+Math.pow(k*u-k*c.x+c.y-b.y,2));for(b=0;b<e;b++)f.push(" "+d[b][1]+" "+100*(c+g*d[b][0])/t+"%");a.css({"background-image":"-webkit-linear-gradient("+-n+"rad,"+f.join(",")+")"})}function T(a,b,c){a=m.Event(a);b.trigger(a,c);return a.isDefaultPrevented()?"prevented":a.isPropagationStopped()?"stopped":""}function D(a){function b(c){this.name="TurnJsError";this.message=c}b.prototype=Error();b.prototype.constructor=b;return new b(a)}
function ca(a){var b={top:0,left:0};do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent);return b}var O="ontouchstart"in window,K=O?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},E={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},na=["single","double"],oa=["ltr","rtl"],pa={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",
when:null},qa={cornerSize:100},h={init:function(a){var b,c=0,d=this.data(),e=this.children();a=m.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},pa,a);d.opts=a;d.pageObjs={};d.pages={};d.pageWrap={};d.pagePlace={};d.pageMv=[];d.totalPages=a.pages||0;d.eventHandlers={touchStart:h._touchStart.bind(this),touchMove:h._touchMove.bind(this),touchEnd:h._touchEnd.bind(this),start:h._eventStart.bind(this)};if(a.when)for(b in a.when)if(z(b,a.when))this.on(b,
a.when[b]);this.css({position:"relative",width:a.width,height:a.height});this.turn("display",a.display);""!==a.direction&&this.turn("direction",a.direction);!O&&a.acceleration&&this.transform(M(0,0,!0));for(b=0;b<e.length;b++)"1"!=m(e[b]).attr("ignore")&&this.turn("addPage",e[b],++c);m(this).on(K.down,d.eventHandlers.touchStart).on("end",h._eventEnd).on("pressed",h._eventPressed).on("released",h._eventReleased).on("flip",h._flip);m(this).parent().on("start",d.eventHandlers.start);m(document).on(K.move,
d.eventHandlers.touchMove).on(K.up,d.eventHandlers.touchEnd);this.turn("page",a.page);d.done=!0;return this},addPage:function(a,b){var c,d=!1,e=this.data(),f=e.totalPages+1;if(e.destroying)return!1;if(c=/\bp([0-9]+)\b/.exec(m(a).attr("class")))b=parseInt(c[1],10);if(b)if(b==f)d=!0;else{if(b>f)throw D('Page "'+b+'" cannot be inserted');}else b=f,d=!0;1<=b&&b<=f&&(c="double"==e.display?b%2?" odd":" even":"",e.done&&this.turn("stop"),b in e.pageObjs&&h._movePages.call(this,b,1),d&&(e.totalPages=f),e.pageObjs[b]=
m(a).css({"float":"left"}).addClass("page p"+b+c),h._addPage.call(this,b),h._removeFromDOM.call(this));return this},_addPage:function(a){var b=this.data(),c=b.pageObjs[a];if(c)if(h._necessPage.call(this,a)){if(!b.pageWrap[a]){b.pageWrap[a]=m("<div/>",{"class":"page-wrapper",page:a,css:{position:"absolute",overflow:"hidden"}});this.append(b.pageWrap[a]);b.pagePlace[a]||(b.pagePlace[a]=a,b.pageObjs[a].appendTo(b.pageWrap[a]));var d=h._pageSize.call(this,a,!0);c.css({width:d.width,height:d.height});
b.pageWrap[a].css(d)}b.pagePlace[a]==a&&h._makeFlip.call(this,a)}else b.pagePlace[a]=0,b.pageObjs[a]&&b.pageObjs[a].remove()},hasPage:function(a){return z(a,this.data().pageObjs)},center:function(a){var b=this.data(),c=m(this).turn("size"),d=0;b.noCenter||("double"==b.display&&(a=this.turn("view",a||b.tpage||b.page),"ltr"==b.direction?a[0]?a[1]||(d+=c.width/4):d-=c.width/4:a[0]?a[1]||(d-=c.width/4):d+=c.width/4),m(this).css({marginLeft:d}));return this},destroy:function(){var a=this,b=this.data();
if("prevented"!=T("destroying",this)){b.destroying=!0;m.each("end first flip last pressed released start turning turned missing".split(" "),function(c,d){a.off(d)});this.parent().off("start",b.eventHandlers.start);for(m(document).off(K.move,b.eventHandlers.touchMove).off(K.up,b.eventHandlers.touchEnd);0!==b.totalPages;)this.turn("removePage",b.totalPages);b.fparent&&b.fparent.remove();b.shadow&&b.shadow.remove();this.removeData();b=null;return this}},is:function(){return"object"==typeof this.data().pages},
_pageSize:function(a,b){var c=this.data(),d={};if("single"==c.display)d.width=this.width(),d.height=this.height(),b&&(d.top=0,d.left=0,d.right="auto");else{var e=this.width()/2,f=this.height();c.pageObjs[a].hasClass("own-size")?(d.width=c.pageObjs[a].width(),d.height=c.pageObjs[a].height()):(d.width=e,d.height=f);b&&(a%=2,d.top=(f-d.height)/2,"ltr"==c.direction?(d[a?"right":"left"]=e-d.width,d[a?"left":"right"]="auto"):(d[a?"left":"right"]=e-d.width,d[a?"right":"left"]="auto"))}return d},_makeFlip:function(a){var b=
this.data();if(!b.pages[a]&&b.pagePlace[a]==a){var c="single"==b.display,d=a%2;b.pages[a]=b.pageObjs[a].css(h._pageSize.call(this,a)).flip({page:a,next:d||c?a+1:a-1,turn:this}).flip("disable",b.disabled);h._setPageLoc.call(this,a)}return b.pages[a]},_makeRange:function(){var a;if(!(1>this.data().totalPages)){var b=this.turn("range");for(a=b[0];a<=b[1];a++)h._addPage.call(this,a)}},range:function(a){var b=this.data();a=a||b.tpage||b.page||1;var c=h._view.call(this,a);if(1>a||a>b.totalPages)throw D('"'+
a+'" is not a valid page');c[1]=c[1]||c[0];if(1<=c[0]&&c[1]<=b.totalPages)if(b.totalPages-c[1]>c[0]){a=Math.min(c[0]-1,2);var d=4-a}else d=Math.min(b.totalPages-c[1],2),a=4-d;else d=a=5;return[Math.max(1,c[0]-a),Math.min(b.totalPages,c[1]+d)]},_necessPage:function(a){if(0===a)return!0;var b=this.turn("range");return this.data().pageObjs[a].hasClass("fixed")||a>=b[0]&&a<=b[1]},_removeFromDOM:function(){var a,b=this.data();for(a in b.pageWrap)z(a,b.pageWrap)&&!h._necessPage.call(this,a)&&h._removePageFromDOM.call(this,
a)},_removePageFromDOM:function(a){var b=this.data();if(b.pages[a]){var c=b.pages[a].data();l._moveFoldingPage.call(b.pages[a],!1);c.f&&c.f.fwrapper&&c.f.fwrapper.remove();b.pages[a].removeData();b.pages[a].remove();delete b.pages[a]}b.pageObjs[a]&&b.pageObjs[a].remove();b.pageWrap[a]&&(b.pageWrap[a].remove(),delete b.pageWrap[a]);h._removeMv.call(this,a);delete b.pagePlace[a]},removePage:function(a){var b=this.data();if("*"==a)for(;0!==b.totalPages;)this.turn("removePage",b.totalPages);else{if(1>
a||a>b.totalPages)throw D("The page "+a+" doesn't exist");b.pageObjs[a]&&(this.turn("stop"),h._removePageFromDOM.call(this,a),delete b.pageObjs[a]);h._movePages.call(this,a,-1);--b.totalPages;b.page>b.totalPages?(b.page=null,h._fitPage.call(this,b.totalPages)):(h._makeRange.call(this),this.turn("update"))}return this},_movePages:function(a,b){var c,d=this,e=this.data(),f="single"==e.display,g=function(k){var n=k+b,t=n%2,u=t?" odd ":" even ";e.pageObjs[k]&&(e.pageObjs[n]=e.pageObjs[k].removeClass("p"+
k+" odd even").addClass("p"+n+u));e.pagePlace[k]&&e.pageWrap[k]&&(e.pagePlace[n]=n,e.pageObjs[n].hasClass("fixed")?e.pageWrap[n]=e.pageWrap[k].attr("page",n):e.pageWrap[n]=e.pageWrap[k].css(h._pageSize.call(d,n,!0)).attr("page",n),e.pages[k]&&(e.pages[n]=e.pages[k].flip("options",{page:n,next:f||t?n+1:n-1})),b&&(delete e.pages[k],delete e.pagePlace[k],delete e.pageObjs[k],delete e.pageWrap[k]))};if(0<b)for(c=e.totalPages;c>=a;c--)g(c);else for(c=a;c<=e.totalPages;c++)g(c)},display:function(a){var b=
this.data(),c=b.display;if(void 0===a)return c;if(-1==na.indexOf(a))throw D('"'+a+'" is not a value for display');switch(a){case "single":b.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),b.pageObjs[0]=m("<div />",{"class":"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this));this.addClass("shadow");break;case "double":b.pageObjs[0]&&(this.turn("stop").css({overflow:""}),b.pageObjs[0].remove(),delete b.pageObjs[0]),this.removeClass("shadow")}b.display=a;c&&(a=
this.turn("size"),h._movePages.call(this,1,0),this.turn("size",a.width,a.height).turn("update"));return this},direction:function(a){var b=this.data();if(void 0===a)return b.direction;a=a.toLowerCase();if(-1==oa.indexOf(a))throw D('"'+a+'" is not a value for direction');"rtl"==a&&m(this).attr("dir","ltr").css({direction:"ltr"});b.direction=a;b.done&&this.turn("size",m(this).width(),m(this).height());return this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var a,b,c=this.data();
for(b in c.pages)if(z(b,c.pages)&&(a=c.pages[b].flip("corner")))return a;return!1},data:function(){return this.data()},disable:function(a){var b,c=this.data(),d=this.turn("view");c.disabled=void 0===a||!0===a;for(b in c.pages)z(b,c.pages)&&c.pages[b].flip("disable",c.disabled?!0:-1==d.indexOf(parseInt(b,10)));return this},disabled:function(a){return void 0===a?!0===this.data().disabled:this.turn("disable",a)},size:function(a,b){if(void 0===a||void 0===b)return{width:this.width(),height:this.height()};
this.turn("stop");var c,d=this.data(),e="double"==d.display?a/2:a;this.css({width:a,height:b});d.pageObjs[0]&&d.pageObjs[0].css({width:e,height:b});for(c in d.pageWrap)z(c,d.pageWrap)&&(a=h._pageSize.call(this,c,!0),d.pageObjs[c].css({width:a.width,height:a.height}),d.pageWrap[c].css(a),d.pages[c]&&d.pages[c].css({width:a.width,height:a.height}));this.turn("resize");return this},resize:function(){var a,b=this.data();b.pages[0]&&(b.pageWrap[0].css({left:-this.width()}),b.pages[0].flip("resize",!0));
for(a=1;a<=b.totalPages;a++)b.pages[a]&&b.pages[a].flip("resize",!0);h._updateShadow.call(this);b.opts.autoCenter&&this.turn("center")},_removeMv:function(a){var b,c=this.data();for(b=0;b<c.pageMv.length;b++)if(c.pageMv[b]==a)return c.pageMv.splice(b,1),!0;return!1},_addMv:function(a){var b=this.data();h._removeMv.call(this,a);b.pageMv.push(a)},_view:function(a){var b=this.data();a=a||b.page;return"double"==b.display?a%2?[a-1,a]:[a,a+1]:[a]},view:function(a){var b=this.data();a=h._view.call(this,
a);return"double"==b.display?[0<a[0]?a[0]:0,a[1]<=b.totalPages?a[1]:0]:[0<a[0]&&a[0]<=b.totalPages?a[0]:0]},stop:function(a,b){if(this.turn("animating")){var c,d=this.data();d.tpage&&(d.page=d.tpage,delete d.tpage);for(c=0;c<d.pageMv.length;c++)if(d.pageMv[c]&&d.pageMv[c]!==a){var e=d.pages[d.pageMv[c]];var f=e.data().f.opts;e.flip("hideFoldedPage",b);b||l._moveFoldingPage.call(e,!1);f.force&&(f.next=0===f.page%2?f.page-1:f.page+1,delete f.force)}}this.turn("update");return this},pages:function(a){var b=
this.data();if(a){if(a<b.totalPages)for(var c=b.totalPages;c>a;c--)this.turn("removePage",c);b.totalPages=a;h._fitPage.call(this,b.page);return this}return b.totalPages},_missing:function(a){var b=this.data();if(!(1>b.totalPages)){var c=this.turn("range",a),d=[];for(a=c[0];a<=c[1];a++)b.pageObjs[a]||d.push(a);0<d.length&&this.trigger("missing",[d])}},_fitPage:function(a){var b=this.data(),c=this.turn("view",a);h._missing.call(this,a);b.pageObjs[a]&&(b.page=a,this.turn("stop"),h._removeFromDOM.call(this),
h._makeRange.call(this),h._updateShadow.call(this),this.trigger("turned",[a,c]),this.turn("update"),b.opts.autoCenter&&this.turn("center"))},_turnPage:function(a){var b=this.data(),c=b.pagePlace[a],d=this.turn("view"),e=this.turn("view",a);if(b.page!=a){var f=b.page;if("prevented"==T("turning",this,[a,e])){f==b.page&&-1!=b.pageMv.indexOf(c)&&b.pages[c].flip("hideFoldedPage",!0);return}-1!=e.indexOf(1)&&this.trigger("first");-1!=e.indexOf(b.totalPages)&&this.trigger("last")}if("single"==b.display){var g=
d[0];var k=e[0]}else d[1]&&a>d[1]?(g=d[1],k=e[0]):d[0]&&a<d[0]&&(g=d[0],k=e[1]);c=b.opts.turnCorners.split(",");d=b.pages[g].data().f;e=d.opts;f=d.point;h._missing.call(this,a);b.pageObjs[a]&&(this.turn("stop"),b.page=a,h._makeRange.call(this),b.tpage=k,e.next!=k&&(e.next=k,e.force=!0),this.turn("update"),d.point=f,"hard"==d.effect?"ltr"==b.direction?b.pages[g].flip("turnPage",a>g?"r":"l"):b.pages[g].flip("turnPage",a>g?"l":"r"):"ltr"==b.direction?b.pages[g].flip("turnPage",c[a>g?1:0]):b.pages[g].flip("turnPage",
c[a>g?0:1]))},page:function(a){var b=this.data();if(void 0===a)return b.page;if(!b.disabled&&!b.destroying){a=parseInt(a,10);if(0<a&&a<=b.totalPages)return a!=b.page&&(b.done&&-1==this.turn("view").indexOf(a)?h._turnPage.call(this,a):h._fitPage.call(this,a)),this;throw D("The page "+a+" does not exist");}},next:function(){return this.turn("page",Math.min(this.data().totalPages,h._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,h._view.call(this,this.data().page).shift()-
1))},peel:function(a,b){var c=this.data(),d=this.turn("view");b=void 0===b?!0:!0===b;!1===a?this.turn("stop",null,b):"single"==c.display?c.pages[c.page].flip("peel",a,b):(d="ltr"==c.direction?-1!=a.indexOf("l")?d[0]:d[1]:-1!=a.indexOf("l")?d[1]:d[0],c.pages[d]&&c.pages[d].flip("peel",a,b));return this},_addMotionPage:function(){var a=m(this).data().f.opts,b=a.turn;b.data();h._addMv.call(b,a.page)},_eventStart:function(a,b,c){var d=b.turn.data();a.isDefaultPrevented()||("single"==d.display&&c&&("l"==
c.charAt(1)&&"ltr"==d.direction||"r"==c.charAt(1)&&"rtl"==d.direction?(b.next=b.next<b.page?b.next:b.page-1,b.force=!0):b.next=b.next>b.page?b.next:b.page+1),h._addMotionPage.call(a.target));h._updateShadow.call(b.turn)},_eventEnd:function(a,b,c){m(a.target).data();a=b.turn;var d=a.data();if(c){if(c=d.tpage||d.page,c==b.next||c==b.page)delete d.tpage,h._fitPage.call(a,c||b.next,!0)}else h._removeMv.call(a,b.page),h._updateShadow.call(a),a.turn("update")},_eventPressed:function(a){a=m(a.target).data().f;
var b=a.opts.turn;b.data().mouseAction=!0;b.turn("update");return a.time=(new Date).getTime()},_eventReleased:function(a,b){var c=m(a.target),d=c.data().f,e=d.opts.turn,f=e.data();b="single"==f.display?"br"==b.corner||"tr"==b.corner?b.x<c.width()/2:b.x>c.width()/2:0>b.x||b.x>c.width();if(200>(new Date).getTime()-d.time||b)a.preventDefault(),h._turnPage.call(e,d.opts.next);f.mouseAction=!1},_flip:function(a){a.stopPropagation();a=m(a.target).data().f.opts;a.turn.trigger("turn",[a.next]);a.turn.data().opts.autoCenter&&
a.turn.turn("center",a.next)},_touchStart:function(){var a=this.data(),b;for(b in a.pages)if(z(b,a.pages)&&!1===l._eventStart.apply(a.pages[b],arguments))return!1},_touchMove:function(){var a=this.data(),b;for(b in a.pages)z(b,a.pages)&&l._eventMove.apply(a.pages[b],arguments)},_touchEnd:function(){var a=this.data(),b;for(b in a.pages)z(b,a.pages)&&l._eventEnd.apply(a.pages[b],arguments)},calculateZ:function(a){var b=this,c=this.data();var d=this.turn("view");var e=d[0]||d[1],f=a.length-1,g={pageZ:{},
partZ:{},pageV:{}},k=function(x){x=b.turn("view",x);x[0]&&(g.pageV[x[0]]=!0);x[1]&&(g.pageV[x[1]]=!0)};for(d=0;d<=f;d++){var n=a[d];var t=c.pages[n].data().f.opts.next;var u=c.pagePlace[n];k(n);k(t);n=c.pagePlace[t]==t?t:n;g.pageZ[n]=c.totalPages-Math.abs(e-n);g.partZ[u]=2*c.totalPages-f+d}return g},update:function(){var a,b=this.data();if(this.turn("animating")&&0!==b.pageMv[0]){var c=this.turn("calculateZ",b.pageMv),d=this.turn("corner"),e=this.turn("view"),f=this.turn("view",b.tpage);for(a in b.pageWrap)if(z(a,
b.pageWrap)){var g=b.pageObjs[a].hasClass("fixed");b.pageWrap[a].css({display:c.pageV[a]||g?"":"none",zIndex:(b.pageObjs[a].hasClass("hard")?c.partZ[a]:c.pageZ[a])||(g?-1:0)});if(g=b.pages[a])g.flip("z",c.partZ[a]||null),c.pageV[a]&&g.flip("resize"),b.tpage?g.flip("hover",!1).flip("disable",-1==b.pageMv.indexOf(parseInt(a,10))&&a!=f[0]&&a!=f[1]):g.flip("hover",!1===d).flip("disable",a!=e[0]&&a!=e[1])}}else for(a in b.pageWrap)z(a,b.pageWrap)&&(c=h._setPageLoc.call(this,a),b.pages[a]&&b.pages[a].flip("disable",
b.disabled||1!=c).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var a=this.data(),b=this.width(),c=this.height(),d="single"==a.display?b:b/2;var e=this.turn("view");a.shadow||(a.shadow=m("<div />",{"class":"shadow",css:A(0,0,0).css}).appendTo(this));for(var f=0;f<a.pageMv.length&&e[0]&&e[1];f++){e=this.turn("view",a.pages[a.pageMv[f]].data().f.opts.next);var g=this.turn("view",a.pageMv[f]);e[0]=e[0]&&g[0];e[1]=e[1]&&g[1]}switch(e[0]?e[1]?3:"ltr"==a.direction?2:1:"ltr"==a.direction?
1:2){case 1:a.shadow.css({width:d,height:c,top:0,left:d});break;case 2:a.shadow.css({width:d,height:c,top:0,left:0});break;case 3:a.shadow.css({width:b,height:c,top:0,left:0})}},_setPageLoc:function(a){var b=this.data(),c=this.turn("view"),d=0;if(a==c[0]||a==c[1])d=1;else if("single"==b.display&&a==c[0]+1||"double"==b.display&&a==c[0]-2||a==c[1]+2)d=2;if(!this.turn("animating"))switch(d){case 1:b.pageWrap[a].css({zIndex:b.totalPages,display:""});break;case 2:b.pageWrap[a].css({zIndex:b.totalPages-
1,display:""});break;case 0:b.pageWrap[a].css({zIndex:0,display:b.pageObjs[a].hasClass("fixed")?"":"none"})}return d},options:function(a){if(void 0===a)return this.data().opts;var b=this.data();m.extend(b.opts,a);a.pages&&this.turn("pages",a.pages);a.page&&this.turn("page",a.page);a.display&&this.turn("display",a.display);a.direction&&this.turn("direction",a.direction);a.width&&a.height&&this.turn("size",a.width,a.height);if(a.when)for(var c in a.when)if(z(c,a.when))this.off(c).on(c,a.when[c]);return this},
version:function(){return"4.1.2"}},l={init:function(a){this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}});this.flip("options",a);l._addPageWrapper.call(this);return this},setData:function(a){var b=this.data();b.f=m.extend(b.f,a);return this},options:function(a){var b=this.data().f;return a?(l.setData.call(this,{opts:m.extend({},b.opts||qa,a)}),this):b.opts},z:function(a){var b=this.data().f;b.opts["z-index"]=a;b.fwrapper&&b.fwrapper.css({zIndex:a||parseInt(b.parent.css("z-index"),
10)||0});return this},_cAllowed:function(){var a=this.data().f,b=a.opts.page,c=a.opts.turn.data(),d=b%2;return"hard"==a.effect?"ltr"==c.direction?[d?"r":"l"]:[d?"l":"r"]:"single"==c.display?1==b?"ltr"==c.direction?E.forward:E.backward:b==c.totalPages?"ltr"==c.direction?E.backward:E.forward:E.all:"ltr"==c.direction?E[d?"forward":"backward"]:E[d?"backward":"forward"]},_cornerActivated:function(a){var b=this.data().f,c=this.width(),d=this.height();a={x:a.x,y:a.y,corner:""};var e=b.opts.cornerSize;if(0>=
a.x||0>=a.y||a.x>=c||a.y>=d)return!1;var f=l._cAllowed.call(this);switch(b.effect){case "hard":if(a.x>c-e)a.corner="r";else if(a.x<e)a.corner="l";else return!1;break;case "sheet":if(a.y<e)a.corner+="t";else if(a.y>=d-e)a.corner+="b";else return!1;if(a.x<=e)a.corner+="l";else if(a.x>=c-e)a.corner+="r";else return!1}return a.corner&&-1!=f.indexOf(a.corner)?a:!1},_isIArea:function(a){var b=this.data().f.parent.offset();a=O&&a.originalEvent?a.originalEvent.touches[0]:a;return l._cornerActivated.call(this,
{x:a.pageX-b.left,y:a.pageY-b.top})},_c:function(a,b){b=b||0;switch(a){case "tl":return q(b,b);case "tr":return q(this.width()-b,b);case "bl":return q(b,this.height()-b);case "br":return q(this.width()-b,this.height()-b);case "l":return q(b,0);case "r":return q(this.width()-b,0)}},_c2:function(a){switch(a){case "tl":return q(2*this.width(),0);case "tr":return q(-this.width(),0);case "bl":return q(2*this.width(),this.height());case "br":return q(-this.width(),this.height());case "l":return q(2*this.width(),
0);case "r":return q(-this.width(),0)}},_foldingPage:function(){var a=this.data().f;if(a){var b=a.opts;if(b.turn)return a=b.turn.data(),"single"==a.display?1<b.next||1<b.page?a.pageObjs[0]:null:a.pageObjs[b.next]}},_backGradient:function(){var a=this.data().f,b=a.opts.turn.data();(b=b.opts.gradients&&("single"==b.display||2!=a.opts.page&&a.opts.page!=b.totalPages-1))&&!a.bshadow&&(a.bshadow=m("<div/>",A(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(a.parent));return b},
type:function(){return this.data().f.effect},resize:function(a){var b=this.data().f,c=b.opts.turn.data(),d=this.width(),e=this.height();switch(b.effect){case "hard":a&&(b.wrapper.css({width:d,height:e}),b.fpage.css({width:d,height:e}),c.opts.gradients&&(b.ashadow.css({width:d,height:e}),b.bshadow.css({width:d,height:e})));break;case "sheet":a&&(a=Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(e,2))),b.wrapper.css({width:a,height:a}),b.fwrapper.css({width:a,height:a}).children(":first-child").css({width:d,
height:e}),b.fpage.css({width:d,height:e}),c.opts.gradients&&b.ashadow.css({width:d,height:e}),l._backGradient.call(this)&&b.bshadow.css({width:d,height:e})),b.parent.is(":visible")&&(c=ca(b.parent[0]),b.fwrapper.css({top:c.top,left:c.left}),c=ca(b.opts.turn[0]),b.fparent.css({top:-c.top,left:-c.left})),this.flip("z",b.opts["z-index"])}},_addPageWrapper:function(){var a=this.data().f,b=a.opts.turn.data(),c=this.parent();a.parent=c;if(!a.wrapper)switch(a.effect){case "hard":var d={"transform-style":"preserve-3d",
"backface-visibility":"hidden"};a.wrapper=m("<div/>",A(0,0,2)).css(d).appendTo(c).prepend(this);a.fpage=m("<div/>",A(0,0,1)).css(d).appendTo(c);b.opts.gradients&&(a.ashadow=m("<div/>",A(0,0,0)).hide().appendTo(c),a.bshadow=m("<div/>",A(0,0,0)));break;case "sheet":this.width(),this.height(),a.fparent=a.opts.turn.data().fparent,a.fparent||(d=m("<div/>",{css:{"pointer-events":"none"}}).hide(),d.data().flips=0,d.css(A(0,0,"auto","visible").css).appendTo(a.opts.turn),a.opts.turn.data().fparent=d,a.fparent=
d),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),a.wrapper=m("<div/>",A(0,0,this.css("z-index"))).appendTo(c).prepend(this),a.fwrapper=m("<div/>",A(c.offset().top,c.offset().left)).hide().appendTo(a.fparent),a.fpage=m("<div/>",A(0,0,0,"visible")).css({cursor:"default"}).appendTo(a.fwrapper),b.opts.gradients&&(a.ashadow=m("<div/>",A(0,0,1)).appendTo(a.fpage)),l.setData.call(this,a)}l.resize.call(this,!0)},_fold:function(a){var b=this.data().f,c=b.opts.turn.data(),d=l._c.call(this,
a.corner),e=this.width(),f=this.height();switch(b.effect){case "hard":a.x="l"==a.corner?Math.min(Math.max(a.x,0),2*e):Math.max(Math.min(a.x,e),-e);var g=c.totalPages,k=b.opts["z-index"]||g,n={overflow:"visible"},t=d.x?(d.x-a.x)/e:a.x/e,u=90*t,x=90>u;switch(a.corner){case "l":var U="0% 50%";var P="100% 50%";if(x){var B=0;var V=0<b.opts.next-1;var Q=1}else B="100%",V=b.opts.page+1<g,Q=0;break;case "r":U="100% 50%",P="0% 50%",u=-u,e=-e,x?(B=0,V=b.opts.next+1<g,Q=0):(B="-100%",V=1!=b.opts.page,Q=1)}n["perspective-origin"]=
P;b.wrapper.transform("rotateY("+u+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",P);b.fpage.transform("translateX("+e+"px) rotateY("+(180+u)+"deg)",U);b.parent.css(n);x?(t=-t+1,b.wrapper.css({zIndex:k+1}),b.fpage.css({zIndex:k})):(--t,b.wrapper.css({zIndex:k}),b.fpage.css({zIndex:k+1}));c.opts.gradients&&(V?b.ashadow.css({display:"",left:B,backgroundColor:"rgba(0,0,0,"+.5*t+")"}).transform("rotateY(0deg)"):b.ashadow.hide(),b.bshadow.css({opacity:-t+1}),x?b.bshadow.parent()[0]!=b.wrapper[0]&&
b.bshadow.appendTo(b.wrapper):b.bshadow.parent()[0]!=b.fpage[0]&&b.bshadow.appendTo(b.fpage),ba(b.bshadow,q(100*Q,0),q(100*(-Q+1),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case "sheet":var W=this,R=0,da,G,H,X,F,Y,ja,C=q(0,0),ea=q(0,0),w=q(0,0),ra=l._foldingPage.call(this),Z=c.opts.acceleration,fa=b.wrapper.height(),L="t"==a.corner.substr(0,1),I="l"==a.corner.substr(1,1),S=function(){var p=q(0,0),v=q(0,0);p.x=d.x?d.x-a.x:a.x;p.y=d.y?d.y-a.y:a.y;v.x=I?e-p.x/2:a.x+p.x/2;v.y=p.y/2;var r=
Math.PI/2-Math.atan2(p.y,p.x),y=Math.max(0,Math.sin(r-Math.atan2(v.y,v.x))*Math.sqrt(Math.pow(v.x,2)+Math.pow(v.y,2)));R=r/Math.PI*180;w=q(y*Math.sin(r),y*Math.cos(r));if(r>Math.PI/2&&(w.x+=Math.abs(w.y*p.y/p.x),w.y=0,Math.round(w.x*Math.tan(Math.PI-r))<f))return a.y=Math.sqrt(Math.pow(f,2)+2*v.x*p.x),L&&(a.y=f-a.y),S();r>Math.PI/2&&(p=Math.PI-r,v=fa-f/Math.sin(p),C=q(Math.round(v*Math.cos(p)),Math.round(v*Math.sin(p))),I&&(C.x=-C.x),L&&(C.y=-C.y));da=Math.round(w.y/Math.tan(r)+w.x);p=e-da;v=p*Math.cos(2*
r);y=p*Math.sin(2*r);ea=q(Math.round(I?p-v:da+v),Math.round(L?y:f-y));c.opts.gradients&&(F=p*Math.sin(r),p=l._c2.call(W,a.corner),p=Math.sqrt(Math.pow(p.x-a.x,2)+Math.pow(p.y-a.y,2))/e,ja=Math.sin(Math.PI/2*(1<p?2-p:p)),Y=Math.min(p,1),X=100<F?(F-100)/F:0,G=q(F*Math.sin(r)/e*100,F*Math.cos(r)/f*100),l._backGradient.call(W)&&(H=q(1.2*F*Math.sin(r)/e*100,1.2*F*Math.cos(r)/f*100),I||(H.x=100-H.x),L||(H.y=100-H.y)));w.x=Math.round(w.x);w.y=Math.round(w.y);return!0};B=function(p,v,r,y){var J=["0","auto"],
ka=(e-fa)*r[0]/100,la=(f-fa)*r[1]/100;v={left:J[v[0]],top:J[v[1]],right:J[v[2]],bottom:J[v[3]]};J={};var ma=90!=y&&-90!=y?I?-1:1:0,aa=r[0]+"% "+r[1]+"%";W.css(v).transform(N(y)+M(p.x+ma,p.y,Z),aa);b.fpage.css(v).transform(N(y)+M(p.x+ea.x-C.x-e*r[0]/100,p.y+ea.y-C.y-f*r[1]/100,Z)+N((180/y-2)*y),aa);b.wrapper.transform(M(-p.x+ka-ma,-p.y+la,Z)+N(-y),aa);b.fwrapper.transform(M(-p.x+C.x+ka,-p.y+C.y+la,Z)+N(-y),aa);c.opts.gradients&&(r[0]&&(G.x=100-G.x),r[1]&&(G.y=100-G.y),J["box-shadow"]="0 0 20px rgba(0,0,0,"+
.5*ja+")",ra.css(J),ba(b.ashadow,q(I?100:0,L?0:100),q(G.x,G.y),[[X,"rgba(0,0,0,0)"],[.8*(1-X)+X,"rgba(0,0,0,"+.2*Y+")"],[1,"rgba(255,255,255,"+.2*Y+")"]],3,0),l._backGradient.call(W)&&ba(b.bshadow,q(I?0:100,L?0:100),q(H.x,H.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*Y+")"],[1,"rgba(0,0,0,0)"]],3))};switch(a.corner){case "tl":a.x=Math.max(a.x,1);S();B(w,[1,0,0,1],[100,0],R);break;case "tr":a.x=Math.min(a.x,e-1);S();B(q(-w.x,w.y),[0,0,0,1],[0,0],-R);break;case "bl":a.x=Math.max(a.x,1);S();B(q(w.x,
-w.y),[1,1,0,0],[100,100],-R);break;case "br":a.x=Math.min(a.x,e-1),S(),B(q(-w.x,-w.y),[0,1,1,0],[0,100],R)}}b.point=a},_moveFoldingPage:function(a){var b=this.data().f;if(b){var c=b.opts.turn,d=c.data(),e=d.pagePlace;a?(d=b.opts.next,e[d]!=b.opts.page&&(b.folding&&l._moveFoldingPage.call(this,!1),l._foldingPage.call(this).appendTo(b.fpage),e[d]=b.opts.page,b.folding=d),c.turn("update")):b.folding&&(d.pages[b.folding]?(c=d.pages[b.folding].data().f,d.pageObjs[b.folding].appendTo(c.wrapper)):d.pageWrap[b.folding]&&
d.pageObjs[b.folding].appendTo(d.pageWrap[b.folding]),b.folding in e&&(e[b.folding]=b.folding),delete b.folding)}},_showFoldedPage:function(a,b){var c=l._foldingPage.call(this),d=this.data(),e=d.f,f=e.visible;if(c){if(!f||!e.point||e.point.corner!=a.corner)if(c="hover"==e.status||"peel"==e.status||e.opts.turn.data().mouseAction?a.corner:null,f=!1,"prevented"==T("start",this,[e.opts,c]))return!1;if(b){var g=this;b=e.point&&e.point.corner==a.corner?e.point:l._c.call(this,a.corner,1);this.animatef({from:[b.x,
b.y],to:[a.x,a.y],duration:500,frame:function(k){a.x=Math.round(k[0]);a.y=Math.round(k[1]);l._fold.call(g,a)}})}else l._fold.call(this,a),d.effect&&!d.effect.turning&&this.animatef(!1);if(!f)switch(e.effect){case "hard":e.visible=!0;l._moveFoldingPage.call(this,!0);e.fpage.show();e.opts.shadows&&e.bshadow.show();break;case "sheet":e.visible=!0,e.fparent.show().data().flips++,l._moveFoldingPage.call(this,!0),e.fwrapper.show(),e.bshadow&&e.bshadow.show()}return!0}return!1},hide:function(){var a=this.data().f,
b=a.opts.turn.data(),c=l._foldingPage.call(this);switch(a.effect){case "hard":b.opts.gradients&&(a.bshadowLoc=0,a.bshadow.remove(),a.ashadow.hide());a.wrapper.transform("");a.fpage.hide();break;case "sheet":0===--a.fparent.data().flips&&a.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),a.wrapper.transform(""),a.fwrapper.hide(),a.bshadow&&a.bshadow.hide(),c.transform("")}a.visible=!1;return this},hideFoldedPage:function(a){var b=this.data().f;if(b.point){var c=this,
d=b.point,e=function(){b.point=null;b.status="";c.flip("hide");c.trigger("end",[b.opts,!1])};if(a){var f=l._c.call(this,d.corner);a="t"==d.corner.substr(0,1)?Math.min(0,d.y-f.y)/2:Math.max(0,d.y-f.y)/2;var g=q(d.x,d.y+a),k=q(f.x,f.y-a);this.animatef({from:0,to:1,frame:function(n){n=ia(d,g,k,f,n);d.x=n.x;d.y=n.y;l._fold.call(c,d)},complete:e,duration:800,hiding:!0})}else this.animatef(!1),e()}},turnPage:function(a){var b=this,c=this.data().f,d=c.opts.turn.data();a={corner:c.corner?c.corner.corner:
a||l._cAllowed.call(this)[0]};var e=c.point||l._c.call(this,a.corner,c.opts.turn?d.opts.elevation:0),f=l._c2.call(this,a.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(g){g=ia(e,e,f,f,g);a.x=g.x;a.y=g.y;l._showFoldedPage.call(b,a)},complete:function(){b.trigger("end",[c.opts,!0])},duration:d.opts.duration,turning:!0});c.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},
_eventStart:function(a){var b=this.data().f,c=b.opts.turn;if(!b.corner&&!b.disabled&&!this.flip("isTurning")&&b.opts.page==c.data().pagePlace[b.opts.page]){b.corner=l._isIArea.call(this,a);if(b.corner&&l._foldingPage.call(this))return this.trigger("pressed",[b.point]),l._showFoldedPage.call(this,b.corner),!1;b.corner=null}},_eventMove:function(a){var b=this.data().f;if(!b.disabled)if(a=O?a.originalEvent.touches:[a],b.corner){var c=b.parent.offset();b.corner.x=a[0].pageX-c.left;b.corner.y=a[0].pageY-
c.top;l._showFoldedPage.call(this,b.corner)}else if(b.hover&&!this.data().effect&&this.is(":visible"))if(a=l._isIArea.call(this,a[0])){if("sheet"==b.effect&&2==a.corner.length||"hard"==b.effect)b.status="hover",b=l._c.call(this,a.corner,b.opts.cornerSize/2),a.x=b.x,a.y=b.y,l._showFoldedPage.call(this,a,!0)}else"hover"==b.status&&(b.status="",l.hideFoldedPage.call(this,!0))},_eventEnd:function(){var a=this.data().f,b=a.corner;!a.disabled&&b&&"prevented"!=T("released",this,[a.point||b])&&l.hideFoldedPage.call(this,
!0);a.corner=null},disable:function(a){l.setData.call(this,{disabled:a});return this},hover:function(a){l.setData.call(this,{hover:a});return this},peel:function(a,b){var c=this.data().f;if(a){if(-1==E.all.indexOf(a))throw D("Corner "+a+" is not permitted");if(-1!=l._cAllowed.call(this).indexOf(a)){var d=l._c.call(this,a,c.opts.cornerSize/2);c.status="peel";l._showFoldedPage.call(this,{corner:a,x:d.x,y:d.y},b)}}else c.status="",l.hideFoldedPage.call(this,b);return this}};m.extend(m.fn,{flip:function(){return ha(m(this[0]),
l,arguments)},turn:function(){return ha(m(this[0]),h,arguments)},transform:function(a,b){var c={};b&&(c["transform-origin"]=b);c.transform=a;return this.css(c)},animatef:function(a){var b=this.data();b.effect&&b.effect.stop();if(a){a.to.length||(a.to=[a.to]);a.from.length||(a.from=[a.from]);for(var c=[],d=a.to.length,e=!0,f=this,g=(new Date).getTime(),k=function(){if(b.effect&&e){for(var t=[],u=Math.min(a.duration,(new Date).getTime()-g),x=0;x<d;x++)t.push(b.effect.easing(1,u,a.from[x],c[x],a.duration));
a.frame(1==d?t[0]:t);u==a.duration?(delete b.effect,f.data(b),a.complete&&a.complete()):window.requestAnimationFrame(k)}},n=0;n<d;n++)c.push(a.to[n]-a.from[n]);b.effect=m.extend({stop:function(){e=!1},easing:function(t,u,x,U,P){return U*Math.sqrt(1-(u=u/P-1)*u)+x}},a);this.data(b);k()}else delete b.effect}});m.isTouch=O;m.mouseEvents=K;m.findPos=ca})(jQuery);
